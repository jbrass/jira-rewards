<atlassian-plugin key="${project.groupId}.${project.artifactId}" name="${project.name}" plugins-version="2">
    <plugin-info>
        <description>${project.description}</description>
        <version>${project.version}</version>
        <vendor name="${project.organization.name}" url="${project.organization.url}" />
        <param name="plugin-icon">images/pluginIcon.png</param>
        <param name="plugin-logo">images/pluginLogo.png</param>
    </plugin-info>

    <!-- add our i18n resource -->
    <resource type="i18n" name="i18n" location="rewards"/>
    
    <!-- add our web resources -->
    <web-resource key="rewards-resources" name="rewards Web Resources">
        <dependency>com.atlassian.auiplugin:ajs</dependency>
        
        <resource type="download" name="rewards.css" location="/css/rewards.css"/>
        <resource type="download" name="rewards.js" location="/js/rewards.js"/>
        <resource type="download" name="images/" location="/images"/>

        <context>atl.general</context>
    </web-resource>

    <!-- COMPONENTS -->
    <component key="rcmpts_dsrwdtps" class="ro.agrade.jira.rewards.dao.RewardTypeDataServiceImpl" public="false">
        <interface>ro.agrade.jira.rewards.dao.RewardTypeDataService</interface>
    </component>

    <component key="rcmpts_dsrwdspr" class="ro.agrade.jira.rewards.dao.RewardSprintDataServiceImpl" public="false">
        <interface>ro.agrade.jira.rewards.dao.RewardSprintDataService</interface>
    </component>

    <component key="rcmpts_dsrwdsprgst" class="ro.agrade.jira.rewards.dao.RewardSprintInvDataServiceImpl" public="false">
        <interface>ro.agrade.jira.rewards.dao.RewardSprintInvDataService</interface>
    </component>

    <component key="rcmpts_dsrwdrwd" class="ro.agrade.jira.rewards.dao.RewardDataServiceImpl" public="false">
        <interface>ro.agrade.jira.rewards.dao.RewardDataService</interface>
    </component>

    <component key="rcmpts_sra" class="ro.agrade.jira.rewards.services.RewardAdminServiceImpl" public="false">
        <interface>ro.agrade.jira.rewards.services.RewardAdminService</interface>
    </component>

    <component key="rcmpts_srs" class="ro.agrade.jira.rewards.services.RewardServiceImpl" public="false">
        <interface>ro.agrade.jira.rewards.services.RewardService</interface>
    </component>
    
    <!-- import from the product container -->
    <component-import key="applicationProperties" interface="com.atlassian.sal.api.ApplicationProperties" />
    <component-import key="soyTemplateRenderer" interface="com.atlassian.soy.renderer.SoyTemplateRenderer"/>


    <web-resource key="soy-templates">
        <dependency>com.atlassian.soy.soy-template-plugin:soy-deps</dependency>

        <!-- Available to the server-side only -->
        <resource type="soy" name="templates" location="/soy/templates.soy"/>

        <!-- Make available to the client-side in JS as well... -->
        <transformation extension="soy">
            <transformer key="soyTransformer" />
        </transformation>
        <resource type="download" name="templates.soy.js" location="/soy/templates.soy"/>
        <context>atl.general</context>
    </web-resource>

    <!-- The Issue panel -->
    <web-panel key="rewards-view-issue-panel" location="atl.jira.view.issue.right.context" >
        <label key="rewards.issueView.panel.title"/>
        <context-provider class="ro.agrade.jira.rewards.context.IssueRewardsContextProvider"/>
        <resource name="view" type="velocity" location="velocity/issueView.vm"/>
        <condition class="com.atlassian.jira.plugin.webfragment.conditions.UserLoggedInCondition"/>
    </web-panel>

    <!-- Issue panel header link -->
    <web-item key="create-reward" section="ro.agrade.jira.rewards:rewards-view-issue-panel/header" weight="1">
        <label key="createreward.title"/>
        <tooltip key="createreward.tooltip"/>
        <styleClass>icon jira-icon-add issueaction-create-reward trigger-dialog</styleClass>
        <link linkId="rwd-create-link">
            /secure/CreateWorklog!default.jspa?id=${issue.id}
        </link>
        <condition class="com.atlassian.jira.plugin.webfragment.conditions.UserLoggedInCondition"/>
    </web-item>
    
</atlassian-plugin>